{% extends 'base.html' %}

{% block title %}Home | Django Journal{% endblock %}

{% block content %}
<section class="hero-section mb-4 mb-lg-5">
  {% for post in featured_post %}
    {% if forloop.first %}
    <article class="hero-card" {% if post.featured_image %}style="background-image: linear-gradient(115deg, rgba(22, 34, 54, 0.86), rgba(22, 34, 54, 0.45)), url('{{ post.featured_image.url }}');"{% endif %}>
      <div class="hero-card-content">
        <p class="hero-kicker">Editor Pick</p>
        <h1 class="hero-title">{{ post.title }}</h1>
        <p class="hero-summary">{{ post.short_description|truncatewords:30 }}</p>
        <a href="{% url 'blogs' post.slug %}" class="btn hero-cta">Read Article</a>
      </div>
    </article>
    {% endif %}
  {% empty %}
    <article class="empty-state">
      <h2>No featured post yet</h2>
      <p>Mark a published post as featured to highlight it here.</p>
    </article>
  {% endfor %}
</section>

<section class="mb-4 mb-lg-5">
  <div class="section-head">
    <h2>Featured Stories</h2>
    <p class="section-subtitle">Handpicked reads worth your time.</p>
  </div>

  <div class="row g-4">
    {% for post in featured_post %}
      {% if not forloop.first %}
      <div class="col-12 col-md-6 col-xl-4">
        <article class="post-card h-100 reveal-up">
          <h3><a href="{% url 'blogs' post.slug %}">{{ post.title }}</a></h3>
          <p class="post-meta">{{ post.created_at|timesince }} ago | {{ post.author }}</p>
          <p>{{ post.short_description|truncatewords:24 }}</p>
        </article>
      </div>
      {% endif %}
    {% empty %}
      <div class="col-12">
        <article class="empty-state compact">
          <p>No featured stories available.</p>
        </article>
      </div>
    {% endfor %}
  </div>
</section>

<section>
  <div class="section-head">
    <h2>Latest Articles</h2>
    <p class="section-subtitle">Fresh updates from all categories.</p>
  </div>

  <div class="row g-4">
    {% for post in posts %}
    <div class="col-12 col-md-6 col-xl-4">
      <article class="post-card h-100 reveal-up">
        <h3><a href="{% url 'blogs' post.slug %}">{{ post.title }}</a></h3>
        <p class="post-meta">{{ post.created_at|timesince }} ago | {{ post.author }}</p>
        <p>{{ post.short_description|truncatewords:24 }}</p>
      </article>
    </div>
    {% empty %}
    <div class="col-12">
      <article class="empty-state compact">
        <p>No latest articles found.</p>
      </article>
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}

